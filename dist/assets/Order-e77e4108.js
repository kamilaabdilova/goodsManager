import{j as D,s as P,r as u,v as O,b as m,c as V,d as B,e,f as r,x as d,y as p,z as v,g as T,A as _}from"./index-c7ae716c.js";import{s as U}from"./OrderService-07b439eb.js";const A={class:"surface-ground flex align-items-center justify-content-center min-h-screen min-w-screen overflow-hidden"},E={class:"flex flex-column align-items-center justify-content-center"},R={style:{"border-radius":"56px",padding:"0.3rem",background:"linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"}},S={class:"w-full surface-card py-8 px-5 sm:px-8",style:{"border-radius":"53px"}},j=e("div",{class:"text-center mb-5"},[e("div",{class:"text-900 text-3xl font-medium mb-3"},"Order!")],-1),C=e("label",{for:"address",class:"block text-900 text-xl font-medium mb-2"},"Address",-1),M=e("label",{for:"phone",class:"block text-900 font-medium text-xl mb-2"},"Phone",-1),$=e("label",{for:"date",class:"block text-900 text-xl font-medium mb-2"},"Order Date",-1),L=["min"],N=e("label",{for:"payment",class:"block text-900 font-medium text-xl mb-2"},"Payment method:",-1),Y={class:"mb-5"},z={class:"flex items-center mb-2"},F=["disabled"],I=e("label",{for:"cash"},"Pay with cash",-1),q={class:"flex items-center"},G=["disabled"],H=e("label",{for:"card"},"Pay with card",-1),J=e("div",{class:"my-2"},null,-1),X={__name:"Order",setup(K){const h=D();P();const o=u(null),n=u(null),f=new Date,l=new Date(f);l.setDate(l.getDate()+7);const y=O(()=>{const s=l.getFullYear(),t=(l.getMonth()+1).toString().padStart(2,"0"),i=l.getDate().toString().padStart(2,"0");return`${s}-${t}-${i}`}),c=u("+996"),x=()=>{let s=[];return _.state.basket.basket.forEach(t=>{s.push(t.id)}),s},g=async()=>{try{const s={address:address.value,products:x(),phone:c.value,date:n.value,payment:o.value==="card",totalPrice:k()};h.add({severity:"success",summary:"Your order has been successfully placed!",life:3e3}),console.log(s);const t=await U(s);console.log("Order saved:",t)}catch(s){console.error("Error while saving the order:",s)}},k=()=>{let s=0;return _.state.basket.basket.forEach(t=>{s+=t.price}),s};return(s,t)=>{const i=m("Toast"),b=m("Button"),w=m("RouterLink");return V(),B("div",A,[e("div",E,[e("div",R,[e("div",S,[j,e("div",null,[r(i),C,d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.address=a),id:"address",type:"text",placeholder:"Address",class:"w-full md:w-30rem mb-5",style:{padding:"1rem"}},null,512),[[p,s.address]]),M,d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>c.value=a),id:"phone",type:"text",placeholder:"Phone",class:"w-full md:w-30rem mb-5",style:{padding:"1rem"}},null,512),[[p,c.value]]),$,d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>n.value=a),id:"date",type:"date",class:"w-full md:w-30rem mb-5",style:{padding:"1rem"},min:y.value},null,8,L),[[p,n.value]]),N,e("div",Y,[e("div",z,[d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>o.value=a),type:"radio",id:"cash",value:"cash",class:"mr-2",disabled:o.value==="card"},null,8,F),[[v,o.value]]),I]),e("div",q,[d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>o.value=a),type:"radio",id:"card",value:"card",class:"mr-2",disabled:o.value==="cash"},null,8,G),[[v,o.value]]),H])]),r(b,{class:"p-button-primary",onClick:g,label:"Оформить заказ"})]),J,r(w,{to:"/uikit/basket"},{default:T(()=>[r(b,{class:"p-button-primary",label:"Back to basket"})]),_:1})])])])])}}};export{X as default};
