import{j as y,i as v,a as B,o as w,w as x,b as l,c as i,d,e,l as N,g as m,m as C,F as T,n as F,t as n,f as a}from"./index-c7ae716c.js";const L={class:"col-12"},V={class:"card"},$=e("h5",null,"Your basket:",-1),j={class:"flex align-items-center justify-content-between w-full gap-5"},P=["src","alt"],R={class:"font-semibold"},S={class:"text-2xl font-semibold"},I={__name:"Basket",setup(q){const p=y(),r=v(),k=r.state.auth.user.userName,b=()=>o.baskets.reduce((t,c)=>t+c.price,0),o=B({baskets:[]});w(()=>{o.baskets=r.state.basket.basket.filter(t=>t.userName===k)}),x(()=>r.state.basket.basket,t=>{o.baskets=t.filter(c=>c.userName===k)});const h=async t=>{await r.dispatch("basket/removeFromBasket",t),p.add({severity:"success",summary:"Product successfully removed from the basket!",life:3e3})};return(t,c)=>{const u=l("Button"),f=l("RouterLink"),g=l("Toast"),_=l("router-link");return i(),d("div",L,[e("div",V,[$,t.$route.path!=="/uikit/list"?(i(),N(f,{key:0,to:"/uikit/list"},{default:m(()=>[a(u,{class:"p-button-primary",label:"Back to catalog"})]),_:1})):C("",!0),(i(!0),d(T,null,F(o.baskets,s=>(i(),d("div",{class:"card m-3 border-1 surface-border",key:s.id},[e("div",null,[a(g),e("div",j,[a(_,{to:{name:"productItem",query:{id:s.id}},class:"flex align-items-center justify-content-between w-full"},{default:m(()=>[e("img",{style:{width:"140px",height:"100px"},src:"data:image/png;base64,"+s.image.image,alt:s.image.name},null,8,P),e("div",R,n(s.category==null?"":s.category.nameCategory),1),e("div",null,n(s.description),1),e("div",S,"$"+n(s.price),1)]),_:2},1032,["to"]),a(u,{icon:"pi pi-trash ",onClick:D=>h(s)},null,8,["onClick"])])])]))),128)),e("h5",null,"Number of products in the basket : "+n(o.baskets.length),1),e("h5",null,"Total price: $"+n(b()),1),a(_,{to:"/uikit/order"},{default:m(()=>[a(u,{class:"p-button-primary",label:"Оформить заказ"})]),_:1})])])}}};export{I as default};
